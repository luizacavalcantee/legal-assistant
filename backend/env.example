# ============================================
# CONFIGURAÇÃO BÁSICA (OBRIGATÓRIA)
# ============================================

# Database - Configuração para Docker
DATABASE_URL="postgresql://postgres:postgres@postgres:5432/assistente-db?schema=public"

# Database - Configuração para desenvolvimento local (sem Docker)
# DATABASE_URL="postgresql://postgres:postgres@localhost:5432/assistente-db?schema=public"

# Server
PORT=3000
NODE_ENV=development

# ============================================
# LLM - PROVEDOR DE LINGUAGEM (OBRIGATÓRIO)
# ============================================
# Escolha entre "openai" ou "openrouter" (padrão: openrouter)
# OpenRouter oferece modelos GRATUITOS! Recomendado para desenvolvimento.
LLM_PROVIDER="openrouter"

# ============================================
# OPÇÃO 1: OpenRouter (GRATUITO - Recomendado)
# ============================================
# OpenRouter oferece modelos gratuitos sem necessidade de API key
# Mas é recomendado ter uma key para melhor rate limiting
# Obtenha uma key gratuita em: https://openrouter.ai/keys
# 
# IMPORTANTE: Você pode usar OPENROUTER_API_KEY ou OPENAI_API_KEY
# (o código aceita ambos quando LLM_PROVIDER="openrouter")
OPENROUTER_API_KEY="sk-or-v1-..."  # Opcional, mas recomendado
# ou use:
# OPENAI_API_KEY="sk-or-v1-..."  # Também funciona para OpenRouter

# Modelos gratuitos disponíveis no OpenRouter:
# - tngtech/deepseek-r1t-chimera:free (DeepSeek R1T Chimera - Recomendado)
# - meta-llama/llama-3.3-70b-instruct:free (Llama 3.3 70B)
# - google/gemini-flash-1.5:free (Gemini Flash)
# - microsoft/phi-3.5-mini-128k-instruct:free (Phi-3.5 Mini)
# - meta-llama/llama-3.1-8b-instruct:free (Llama 3.1 8B)
# Veja todos os modelos em: https://openrouter.ai/models
LLM_MODEL="tngtech/deepseek-r1t-chimera:free"

# Headers opcionais para OpenRouter (recomendados para rankings)
OPENROUTER_HTTP_REFERER="http://localhost:3000"  # URL do seu site
OPENROUTER_SITE_NAME="Assistente Jurídico Inteligente"  # Nome do seu site

# ============================================
# OPÇÃO 2: OpenAI (Pago)
# ============================================
# Se usar OpenAI, descomente e configure:
# LLM_PROVIDER="openai"
# OPENAI_API_KEY="sk-..."  # Obtenha em: https://platform.openai.com/api-keys
# LLM_MODEL="gpt-3.5-turbo"  # ou "gpt-4", "gpt-4-turbo", etc.

# ============================================
# RAG - BANCO VETORIAL (OBRIGATÓRIO)
# ============================================
# Qdrant é necessário para indexação vetorial e busca semântica
# Para Docker: http://qdrant:6333
# Para desenvolvimento local: http://localhost:6333
QDRANT_URL="http://localhost:6333"
# QDRANT_API_KEY="..."  # Opcional (necessário para Qdrant Cloud)
QDRANT_COLLECTION_NAME="knowledge_base"

# Embedding Model (para gerar vetores)
# OpenAI: text-embedding-3-small (1536 dims), text-embedding-3-large (3072 dims)
# OpenRouter: openai/text-embedding-3-small, openai/text-embedding-ada-002
EMBEDDING_MODEL="text-embedding-3-small"  # ou "openai/text-embedding-3-small" para OpenRouter
EMBEDDING_DIMENSION="1536"  # Dimensão do vetor (1536 para small, 3072 para large)

# Chunking (divisão de documentos)
CHUNK_SIZE="1000"  # Tamanho do chunk em caracteres
CHUNK_OVERLAP="200"  # Sobreposição entre chunks

# ============================================
# ARMAZENAMENTO DE DOCUMENTOS (OPCIONAL)
# ============================================
# Caminho base para documentos (opcional)
# Se não especificado, usa: ./documents
DOCUMENTS_BASE_PATH="./documents"

# ============================================
# GOOGLE DRIVE (OPCIONAL)
# ============================================
# Para armazenar documentos na nuvem ao invés de localmente
# Opção 1: Service Account Key (JSON como string)
GOOGLE_SERVICE_ACCOUNT_KEY='{"type":"service_account","project_id":"...","private_key_id":"...","private_key":"...","client_email":"...","client_id":"...","auth_uri":"...","token_uri":"...","auth_provider_x509_cert_url":"...","client_x509_cert_url":"..."}'

# Opção 2: Caminho para arquivo JSON (desenvolvimento local)
# GOOGLE_SERVICE_ACCOUNT_PATH="./google-service-account.json"

# ID da pasta no Google Drive onde os arquivos serão salvos
GOOGLE_DRIVE_FOLDER_ID="seu-folder-id-aqui"

# ============================================
# e-SAJ - PORTAL DE CONSULTA PÚBLICA (OPCIONAL)
# ============================================
# URL do portal e-SAJ (ajustar conforme necessário)
# Exemplo: https://esaj.tjsp.jus.br/cpopg/open.do
ESAJ_URL="https://esaj.tjsp.jus.br/cpopg/open.do"

# Puppeteer - Modo headless (true = sem interface gráfica, false = com interface)
# Para desenvolvimento, pode ser útil usar false para ver o navegador
PUPPETEER_HEADLESS="true"

# Diretório para downloads temporários do e-SAJ (opcional)
# Se não especificado, usa: ./downloads_esaj
DOWNLOADS_DIR="./downloads_esaj"

# Cache do Puppeteer (opcional)
# PUPPETEER_CACHE_DIR="./.cache/puppeteer"

# ============================================
# CORS E DEPLOY (OPCIONAL)
# ============================================
# URLs permitidas para CORS (separadas por vírgula)
# CORS_ORIGIN="https://seu-dominio.com,https://outro-dominio.com"

# URL do frontend (alternativa ao CORS_ORIGIN)
# FRONTEND_URL="https://seu-dominio.com"

# Forçar HTTPS em produção (Render, Vercel, etc.)
# FORCE_HTTPS="true"
